{% extends "base.html" %}
{% block title %}Teste Vocacional{% endblock %}

{% block content %}
<div class="grid" style="margin-top:20px; align-items: flex-start;">

  <div class="col-8 card teste-card">
    <h3 class="title">Teste Vocacional Aprimorado</h3>
    <p class="subtitle small-muted">Responda com sinceridade para encontrar sua trilha.</p>

    <div class="progress-bar-container">
      <div id="progressBar" class="progress-bar"></div>
    </div>
    <div id="progressText" class="progress-text small-muted">0 de 10 respondidas</div>

    <form id="testeForm" action="{{ url_for('teste') }}" method="POST" class="form-quiz">
      
      <div class="question-group">
        
        <div class="question">
          <label class="question-title">1) Em um sábado livre, você prefere?</label>
          <div class="question-options">
            <label class="question-option" for="q1_opt1">
              <input type="radio" id="q1_opt1" name="q1" value="organizado" required>
              <span>Organizar suas finanças ou planejar a semana</span>
            </label>
            <label class="question-option" for="q1_opt2">
              <input type="radio" id="q1_opt2" name="q1" value="criativo">
              <span>Pintar, escrever um texto ou consumir arte</span>
            </label>
          </div>
        </div>

        <div class="question">
          <label class="question-title">2) Em um trabalho em equipe, você costuma:</label>
          <div class="question-options">
            <label class="question-option" for="q2_opt1">
              <input type="radio" id="q2_opt1" name="q2" value="analitico" required>
              <span>Analisar os dados e encontrar a falha no processo</span>
            </label>
            <label class="question-option" for="q2_opt2">
              <input type="radio" id="q2_opt2" name="q2" value="social">
              <span>Apresentar a ideia para o grupo e ouvir feedbacks</span>
            </label>
          </div>
        </div>

        <div class="question">
          <label class="question-title">3) Você prefere tarefas:</label>
          <div class="question-options">
            <label class="question-option" for="q3_opt1">
              <input type="radio" id="q3_opt1" name="q3" value="analitico" required>
              <span>Que exigem foco profundo e resolução de problemas lógicos</span>
            </label>
            <label class="question-option" for="q3_opt2">
              <input type="radio" id="q3_opt2" name="q3" value="social">
              <span>Que envolvem interação, negociação e trabalho em equipe</span>
            </label>
          </div>
        </div>

        <div class="question">
          <label class="question-title">4) O que te dá mais satisfação?</label>
          <div class="question-options">
            <label class="question-option" for="q4_opt1">
              <input type="radio" id="q4_opt1" name="q4" value="criativo" required>
              <span>Terminar um projeto com um visual incrível e original</span>
            </label>
            <label class="question-option" for="q4_opt2">
              <input type="radio" id="q4_opt2" name="q4" value="organizado">
              <span>Ver um sistema complexo funcionando perfeitamente</span>
            </label>
          </div>
        </div>

        <div class="question">
          <label class="question-title">5) Na hora de aprender, você prefere:</label>
          <div class="question-options">
            <label class="question-option" for="q5_opt1">
              <input type="radio" id="q5_opt1" name="q5" value="analitico" required>
              <span>Mergulhar em fórmulas, dados e teoremas</span>
            </label>
            <label class="question-option" for="q5_opt2">
              <input type="radio" id="q5_opt2" name="q5" value="social">
              <span>Debater ideias, entender pessoas e suas motivações</span>
            </label>
          </div>
        </div>

        <div class="question">
          <label class="question-title">6) Como você resolve um grande problema?</label>
          <div class="question-options">
            <label class="question-option" for="q6_opt1">
              <input type="radio" id="q6_opt1" name="q6" value="criativo" required>
              <span>Eu tento uma abordagem nova que ninguém pensou</span>
            </label>
            <label class="question-option" for="q6_opt2">
              <input type="radio" id="q6_opt2" name="q6" value="organizado">
              <span>Eu divido o problema em partes menores e sigo um plano</span>
            </label>
          </div>
        </div>

        <div class="question">
          <label class="question-title">7) O que te atrai mais em um projeto?</label>
          <div class="question-options">
            <label class="question-option" for="q7_opt1">
              <input type="radio" id="q7_opt1" name="q7" value="analitico" required>
              <span>A complexidade técnica e os padrões nos dados</span>
            </label>
            <label class="question-option" for="q7_opt2">
              <input type="radio" id="q7_opt2" name="q7" value="social">
              <span>O impacto que ele terá na vida das pessoas</span>
            </label>
          </div>
        </div>

        <div class="question">
          <label class="question-title">8) Seu ambiente de trabalho ideal é:</label>
          <div class="question-options">
            <label class="question-option" for="q8_opt1">
              <input type="radio" id="q8_opt1" name="q8" value="organizado" required>
              <span>Silencioso, focado e com metas muito claras</span>
            </label>
            <label class="question-option" for="q8_opt2">
              <input type="radio" id="q8_opt2" name="q8" value="social">
              <span>Colaborativo, dinâmico e com muita comunicação</span>
            </label>
          </div>
        </div>

        <div class="question">
          <label class="question-title">9) Você se considera uma pessoa mais:</label>
          <div class="question-options">
            <label class="question-option" for="q9_opt1">
              <input type="radio" id="q9_opt1" name="q9" value="criativo" required>
              <span>Intuitiva e expressiva</span>
            </label>
            <label class="question-option" for="q9_opt2">
              <input type="radio" id="q9_opt2" name="q9" value="analitico">
              <span>Lógica e metódica</span>
            </label>
          </div>
        </div>

        <div class="question">
          <label class="question-title">10) Ao ler um artigo, o que te chama atenção?</label>
          <div class="question-options">
            <label class="question-option" for="q10_opt1">
              <input type="radio" id="q10_opt1" name="q10" value="social" required>
              <span>O impacto humano e social da notícia</span>
            </label>
            <label class="question-option" for="q10_opt2">
              <input type="radio" id="q10_opt2" name="q10" value="organizado">
              <span>Os gráficos, estatísticas e a fonte dos dados</span>
            </label>
          </div>
        </div>

      </div>

      <div class="btn-container">
        <button class="btn btn-primary" type="submit">Ver Meu Resultado</button>
      </div>
    </form>
  </div>

  <div class="col-4 card side-card">
    <h4>Como funciona o teste?</h4>
    <p class="small-muted">
      Suas respostas nos ajudam a identificar seus interesses e aptidões. Com base nisso, calculamos um perfil vocacional e sugerimos as melhores trilhas e carreiras para você explorar. Não há resposta errada!
    </p>
  </div>

</div>
{% endblock %}

{% block body_scripts %}
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const form = document.getElementById('testeForm');
    const totalQuestions = form.querySelectorAll('.question').length;
    const progressBar = document.getElementById('progressBar');
    const progressText = document.getElementById('progressText');

    function updateProgress() {
      const checkedRadios = form.querySelectorAll('input[type="radio"]:checked').length;
      const progressPercentage = (checkedRadios / totalQuestions) * 100;
      
      progressBar.style.width = progressPercentage + '%';
      progressText.textContent = `${checkedRadios} de ${totalQuestions} respondidas`;
    }

    form.addEventListener('change', updateProgress);
    updateProgress();
  });
</script>
{% endblock %}