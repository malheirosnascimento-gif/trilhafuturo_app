{% extends "base.html" %}
{% block title %}Seu Resultado Vocacional{% endblock %}

{% block content %}
<div class="grid" style="margin-top:20px; justify-content: center;">

  <div class="col-8 card resultado-card fade-in">
    
    <div class="resultado-header">
      <p class="small-muted">Parabéns, {{ nome }}! Seu perfil é:</p>
      <h2 class="res-title">{{ perfil.nome }}</h2>
      <p class="res-subtitle">{{ perfil.descricao }}</p>
    </div>

    <section class="res-section">
      <h5><i class="icon-briefcase"></i> Carreiras Sugeridas para Você</h5>
      <div class="tag-list">
        {% for carreira in perfil.carreiras %}
          <span class="tag">{{ carreira }}</span>
        {% endfor %}
      </div>
    </section>

    <section class="res-section">
      <h5><i class="icon-book"></i> Cursos para Desenvolver Habilidades</h5>
      <div class="tag-list">
        {% for curso in perfil.cursos_recomendados %}
          <span class="tag tag-secondary">{{ curso }}</span>
        {% endfor %}
      </div>
    </section>

    <!-- ### ALTERAÇÃO NECESSÁRIA ESTÁ AQUI ### -->
    <section class="res-section">
      <h5><i class="icon-path"></i> Trilhas de Aprendizagem Recomendadas</h5>
      <div class="trilha-card-container">
        
        <!-- O loop agora itera sobre as trilhas que vêm do app.py -->
        {% for trilha in perfil.trilhas %}
          <div class="trilha-card">
            <div class="trilha-card-content">
              <h6 class="trilha-title">{{ trilha.titulo }}</h6>
              <p class="trilha-duration small-muted">Duração estimada: {{ trilha.duracao }}</p>
            </div>
            <!-- O botão agora é um link funcional que leva para a página da trilha específica -->
            <a href="{{ url_for('trilha', id_trilha=trilha.id_trilha) }}" class="btn trilha-btn">Iniciar Trilha</a>
          </div>
        {% else %}
          <p class="small-muted">Nenhuma trilha de aprendizado foi definida para este perfil ainda.</p>
        {% endfor %}

      </div>
    </section>
    <!-- ### FIM DA ALTERAÇÃO ### -->

    <div class="btn-container mt-3">
      <a class="btn btn-outline" href="{{ url_for('teste') }}">Fazer o teste novamente</a>
      <a class="btn btn-primary" href="{{ url_for('dashboard') }}">Ir para o seu Painel</a>
    </div>
  </div>

</div>
{% endblock %}